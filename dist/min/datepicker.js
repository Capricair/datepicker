"use strict";!function(){function t(){function t(){function t(t,e,n){for(var r="",i=t;e>=i;i++)r+='<li data-value="'+i+'">'+i+n+"</li>";return r}var e='<div id="datepicker" class="datepicker-container">\n                                <div class="datepicker-wrapper">\n                                    <div class="datepicker-head">\n                                        <a href="javascript:;" class="btn-cancel">取消</a>\n                                        <a href="javascript:;" class="btn-confirm" data-dismiss="datepicker">确定</a>\n                                    </div>\n                                    <div class="datepicker-body">\n                                        <div class="datepicker-year">\n                                            <ul></ul>\n                                        </div>\n                                        <div class="datepicker-month">\n                                            <ul></ul>\n                                        </div>\n                                        <div class="datepicker-day">\n                                            <ul></ul>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>';n("body").append(e),u=n("#datepicker"),l=u.find(".datepicker-year"),f=u.find(".datepicker-month"),d=u.find(".datepicker-day"),l.find("ul").html(t(c.year.start,c.year.end,"年")),f.find("ul").html(t(c.month.start,c.month.end,"月")),d.find("ul").html(t(c.day.start,c.day.end,"日"))}function e(){function t(t){function n(t){y=!0;var e=s(t);E.css("transition","none",!0),c.time.start=(new Date).getTime(),c.touch.start=e,x.start=x.current}function r(t){var e=s(t);x.current=x.start+e-c.touch.start,h(x.current)}function o(t){y=!1;var e=s(t);c.time.end=(new Date).getTime(),c.touch.end=e,x.direction=x.end>x.start?"down":"up",c.smoothScroll?l():f(),d()}function s(t){return v?(t.touch?t.touches[0]:t.changedTouches[0]).clientY:t.clientY}function l(){var t=c.time.end-c.time.start,n=c.touch.end-c.touch.start,r=e(n,t),i=x.current+n*r*1.5,a=r;m(i,a,"cubic-bezier(.14,.41,.39,.69)")}function f(){var t=parseFloat((x.current/p).toFixed(1));x.current=Math.round(t)*p,m(x.current)}function d(){x.current>A.top?(x.current=A.top,m(x.current)):x.current<A.bottom&&(x.current=A.bottom,m(x.current))}function h(t){x.current=t,E.css("transform","translate3d(0, "+t+"px, 0)",!0)}function m(t){var e=arguments.length<=1||void 0===arguments[1]?.3:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"ease":arguments[2];x.current=t,E.css("transition","transform "+e+"s "+n,!0).css("transform","translate3d(0, "+t+"px, 0)",!0)}function g(t){var e=arguments.length<=1||void 0===arguments[1]?"active":arguments[1];E.find("li.active").removeClass(e),E.find("li:nth-child("+t+")").addClass(e)}var k=this,E=t.find("ul"),b=t.height(),w=E.height(),x={start:0,end:0,current:0,direction:"up"},A={top:2*p,bottom:b-w-2*p},D=0;t.on("datepicker.scroll.touchstart",n),t.on("datepicker.scroll.touchmove",r),t.on("datepicker.scroll.touchend",o),E.once("webkitTransitionEnd transitionend",function(){E.trigger("datepicker.scroll.stop")},!1,500),E.on("datepicker.scroll.stop",function(){f(),k.setActive(a(x.current,p))}),this.setTop=function(t){h(t)},this.setActive=function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];g(t),D=t,e&&u.trigger("datepicker.value.changed")},this.setCurrent=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];m(i(t),e),k.setActive(t,n)},this.getActiveIndex=function(){return D},this.getValue=function(){return parseInt(E.find("li.active").attr("data-value"))}}function e(t,e){return parseFloat(Math.abs(t/e).toFixed(2))}function r(){return l.find("ul > li:first-child").height()}function i(t){return(3-t)*p}function a(t,e){return parseInt(3-t/e)}function o(t){function e(t,e){var n={};return n.value=e,n.top=(t-e+2)*p,n.index=a(n.top,p),n}var n=e(c.year.start,t.getFullYear()),r=e(c.month.start,t.getMonth()+1),i=e(c.day.start,t.getDate());n.value>c.year.start&&n.value<c.year.end&&(m.year.getValue()!==n.value&&(m.year.setTop(n.top),m.year.setActive(n.index)),m.month.getValue()!==r.value&&(m.month.setTop(r.top),m.month.setActive(r.index)),m.day.getValue()!==i.value&&(m.day.setTop(i.top),m.day.setActive(i.index)))}function s(t){var e=m.year.getValue(),n=m.month.getValue(),r=m.day.getValue();return t.replace(/y+/,e).replace(/M+/,h(n,0,2)).replace(/d+/,h(r,0,2))}function h(t,e,n){for(var r=n-t.toString().length,i=0;r>i;i++)t=e.toString()+t.toString();return t}var p=r(),g=v?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"],y=!1;return n(document).on(g.join(" "),function(t){var e=n(t.target);e.closest("#datepicker").length>0&&c.opened&&(t.type===g[0]?e.closest("ul").parent().trigger("datepicker.scroll.touchstart",[t]):t.type===g[1]&&y?e.closest("ul").parent().trigger("datepicker.scroll.touchmove",[t]):t.type===g[2]&&e.closest("ul").parent().trigger("datepicker.scroll.touchend",[t]),t.preventDefault())}),{year:new t(l),month:new t(f),day:new t(d),setDate:o,getDateString:s}}function n(t){if("string"==typeof t&&p[t])return p[t];if(t instanceof HTMLElement||t instanceof HTMLDocument){for(var e=0;e<p.length;e++)if(p[e].elements[0]===t)return p[e]}else if(t instanceof Array)for(var n=0;n<p.length;n++)for(var i=p[n],a=0;a<i.elements.length&&(i.elements.length===t.length&&i.elements[a]==t[a]);a++)if(a===t.length-1)return p[n];var o=new r(t);return p.push(o),o}function r(t){function e(t,e,n){c.elements.forEach(function(i){n&&r(i,t,e),i.style[t]=e})}function r(t,e,n){c.prefix.forEach(function(r){t.style[r+e]=n})}function a(){return c.elements[0]?c.elements[0].getBoundingClientRect():{}}function o(){var t=[];return t.find=function(t,e){for(var n=0;n<this.length;n++){var r=u[n];if(r.target===t&&r.event===e)return r}},t}function s(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}if(t){var c=this,u=o();this.prefix=["-webkit-","-moz-","-ms-","-o-"],this.elements=[],this.typeName="iQuery",t instanceof Array?c.elements=t:t instanceof NodeList?c.elements=i(t):t instanceof HTMLElement||t instanceof HTMLDocument?c.elements=[t]:"iQuery"===t.typeName?c.elements=t.elements:"string"==typeof t?(c.selector=t,c.elements=i(document.querySelectorAll(t))):(console.log("iQuery Notice: selector invalid.\n"),console.log("selector: "+t)),Object.defineProperty(c,"length",{get:function(){return c.elements.length}}),c.elements.forEach(function(t,e){c[e]=t}),["top","left","right","bottom","width","height"].forEach(function(t){c[t]=function(e){return"undefined"==typeof e?a()[t]:(c.css(t,/\d+[^\d]/.test(e)?e:e+"px"),c)}}),this.val=function(t){return"undefined"==typeof t?c[0].value:(c[0].value=t,c)},this.attr=function(t,e){if("string"==typeof t)return"undefined"==typeof e?c.length>0&&c.elements[0].getAttribute?c.elements[0].getAttribute(t):"":(c.elements.forEach(function(n){n.setAttribute(t,e)}),c);if("object"==typeof t){for(var n in t)!function(t){c.elements.forEach(function(n){n.setAttribute(t,e)})}(n);return c}},this.css=function(t,n,r){if("string"==typeof t)return"undefined"==typeof n?c.elements[0].style[t]:(e(t,n,r),c);if("object"==typeof t){for(var i in t)e(i,t[i],r);return c}},this.show=function(){e("display","")},this.hide=function(){e("display","none")},this.addClass=function(t){return c.elements.forEach(function(e){e.classList.add(t)}),c},this.removeClass=function(t){return c.elements.forEach(function(e){e.classList.remove(t)}),c},this.hasClass=function(t){return c.elements[0].classList.contains(t)},this.toggleClass=function(t){return c.hasClass(t)?c.removeClass(t):c.addClass(t),this},this.html=function(t){return"undefined"==typeof t?c.elements[0].innerHTML:(c.elements.forEach(function(e){e.innerHTML=t}),c)},this.append=function(t){return c.elements.forEach(function(e){t instanceof HTMLElement?e.appendChild(t):"iQuery"===t.typeName?t.elements.forEach(function(t){e.appendChild(t)}):"string"==typeof t&&e.appendChild(s(t))}),c},this.find=function(t){var e=[];return c.elements.forEach(function(r){n(r.querySelectorAll(t)).each(function(t){e.push(t)})}),n(e)},this.parent=function(){var t=[];return c.elements.forEach(function(e){e.parentElement&&t.push(e.parentElement)}),n(t)},this.parents=function(){var t=[];return c.elements.forEach(function(e){for(;e.parentElement;)t.push(e.parentElement),e=e.parentElement}),t},this.closest=function(t){var e=[],r=!1;return c.elements.forEach(function(i){for(var a=n(document).find(t);i.parentElement;){for(var o=0;o<a.length;o++)if(a[o]===i.parentElement){e.push(a[o]),r=!0;break}if(r)break;i=i.parentElement}}),n(e)},this.each=function(t){c.elements.forEach(t)},this.reverse=function(){return c.elements.reverse(),c},this.indexOf=function(t){for(var e=0;e<c.length;e++)if(c[e]===t)return e;return-1},this.on=function(t,e,n,r){var i=!0;return"function"==typeof e&&(i=!1,n=e),c.elements.forEach(function(a){var o=i===!1?n:function(t){for(var r=a.querySelectorAll(e),i=0;i<r.length;i++){var o=r[i];if(o===t.target){n.call(o,t);break}}};u.push({target:a,event:t,selector:e,handle:o}),t.split(" ").forEach(function(t){a.addEventListener(t,o,r)})}),this},this.off=function(t,e,n){return c.elements.forEach(function(r){if(!e){var i=u.find(r,t);i&&(e=i.handle)}t.split(" ").forEach(function(t){r.removeEventListener(t,e,n)})}),this},this.one=function(t,e,n){return c.on(t,function(n){c.off(t),e.call(this,n)},n),this},this.once=function(t,e,n,r){var i=0,a=new Date;c.on(t,function(t){var n=new Date;if(0===i&&n-a>r){i++,a=n;try{e.call(this,t)}finally{i=0}}},n)},this.trigger=function(t,e){return c.elements.forEach(function(n){var r=u.find(n,t);r&&r.handle.apply(n,e)}),c}}}function i(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)"undefined"!=typeof n[r]&&(t[r]=n[r])}return t}function o(t){return t%4==0&&(t%100!=0||t%400==0)}function s(){function t(){n("body").addClass("datepicker-open"),c.opened=!0}function e(){n("body").removeClass("datepicker-open"),c.opened=!1}function r(){return h.attr("data-format")||"yyyy-MM-dd"}function i(){var t=r();h.val(m.getDateString(t))}function a(){function t(t){m.day.setCurrent(t,.3,!1)}var e=m.year.getValue(),n=m.month.getValue(),r=m.day.getValue();2===n?o(e)?r>29&&t(29):t(28):-1===[1,3,5,7,8,10,12].indexOf(n)&&r>30&&t(30)}var s=n("[role='datepicker']"),p=v?"touchstart":"click";u.on("datepicker.value.changed",function(){a(),i()}),n(document).on(p,function(e){var a=n(e.target);if(s.indexOf(e.target)>-1){h=a;var o=h.val().replace(/-/g,"/"),c=new Date(o),u=r();l.show(),f.show(),d.show(),/d+/.test(u)||d.hide(),/M+/.test(u)||f.hide(),h.attr("data-default-value",h.val()),isNaN(c.getDate())&&(c=new Date),m.setDate(c),i()}"datepicker"===a.attr("role")&&t()}),u.find("[data-dismiss='datepicker']").on(p,function(){e()}),u.find(".btn-cancel").on(p,function(){h.val(h.attr("data-default-value")),e()})}var c,u,l,f,d,h,p=[],m={},v=/Android|iOS|W(eb)?OS|iPhone|iPad|iPod|BlackBerry|Windows\s?Phone/i.test(window.navigator.userAgent),g={year:{start:1700,end:3e3},month:{start:1,end:12},day:{start:1,end:31},time:{start:0,end:0},touch:{start:0,end:0},opened:!1,smoothScroll:!0};!function(){n.extend=a,c=n.extend({},g),t(),m=e(),m.setDate(new Date),s()}(),window.DatePicker={setOptions:function(t){n.extend(c,t)}}}t()}();
//# sourceMappingURL=datepicker.org.js
//# sourceMappingURL=datepicker.map