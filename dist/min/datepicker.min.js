"use strict";!function(){function t(){function t(){function t(t,e,n){for(var r="",a=t;e>=a;a++)r+='<li data-value="'+a+'">'+a+n+"</li>";return r}var e='<div id="datepicker" class="datepicker-container">\n                                <div class="datepicker-wrapper">\n                                    <div class="datepicker-head">\n                                        <a href="javascript:;" class="btn-cancel">取消</a>\n                                        <a href="javascript:;" class="btn-confirm" data-dismiss="datepicker">确定</a>\n                                    </div>\n                                    <div class="datepicker-body">\n                                        <div class="datepicker-year">\n                                            <ul></ul>\n                                        </div>\n                                        <div class="datepicker-month">\n                                            <ul></ul>\n                                        </div>\n                                        <div class="datepicker-day">\n                                            <ul></ul>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>';n("body").append(e),u=n("#datepicker"),l=u.find(".datepicker-year"),f=u.find(".datepicker-month"),d=u.find(".datepicker-day"),l.find("ul").html(t(s.year.start,s.year.end,"年")),f.find("ul").html(t(s.month.start,s.month.end,"月")),d.find("ul").html(t(s.day.start,s.day.end,"日"))}function e(){function t(t){function n(t){y=!0;var e=c(t);E.css("transition","none",!0),s.time.start=(new Date).getTime(),s.touch.start=e,x.start=x.current}function r(t){var e=c(t);x.current=x.start+e-s.touch.start,h(x.current)}function o(t){y=!1;var e=c(t);s.time.end=(new Date).getTime(),s.touch.end=e,x.direction=x.end>x.start?"down":"up",s.smoothScroll?l():f(),d()}function c(t){var e=t.touch?t.touches[0]:t.changedTouches[0];return v?e.clientY:t.clientY}function l(){var t=s.time.end-s.time.start,n=s.touch.end-s.touch.start,r=e(n,t),a=x.current+n*r*1.5,i=r;p(a,i,"cubic-bezier(.14,.41,.39,.69)")}function f(){var t=parseFloat((x.current/m).toFixed(1));x.current=Math.round(t)*m,p(x.current)}function d(){x.current>A.top?(x.current=A.top,p(x.current)):x.current<A.bottom&&(x.current=A.bottom,p(x.current))}function h(t){x.current=t,E.css("transform","translate3d(0, "+t+"px, 0)",!0)}function p(t){var e=arguments.length<=1||void 0===arguments[1]?.3:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"ease":arguments[2];x.current=t,E.css("transition","transform "+e+"s "+n,!0).css("transform","translate3d(0, "+t+"px, 0)",!0)}function g(t){var e=arguments.length<=1||void 0===arguments[1]?"active":arguments[1];E.find("li.active").removeClass(e),E.find("li:nth-child("+t+")").addClass(e)}var k=this,E=t.find("ul"),b=t.height(),w=E.height(),x={start:0,end:0,current:0,direction:"up"},A={top:2*m,bottom:b-w-2*m},D=0;t.on("datepicker.scroll.touchstart",n),t.on("datepicker.scroll.touchmove",r),t.on("datepicker.scroll.touchend",o),E.once("webkitTransitionEnd transitionend",function(){E.trigger("datepicker.scroll.stop")},!1,500),E.on("datepicker.scroll.stop",function(){f(),k.setActive(i(x.current,m))}),this.setTop=function(t){h(t)},this.setActive=function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];g(t),D=t,e&&u.trigger("datepicker.value.changed")},this.setCurrent=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];p(a(t),e),k.setActive(t,n)},this.getActiveIndex=function(){return D},this.getValue=function(){return parseInt(E.find("li.active").attr("data-value"))}}function e(t,e){return parseFloat(Math.abs(t/e).toFixed(2))}function r(){return l.find("ul > li:first-child").height()}function a(t){return(3-t)*m}function i(t,e){return parseInt(3-t/e)}function o(t){function e(t,e){var n={};return n.value=e,n.top=(t-e+2)*m,n.index=i(n.top,m),n}var n=e(s.year.start,t.getFullYear()),r=e(s.month.start,t.getMonth()+1),a=e(s.day.start,t.getDate());n.value>s.year.start&&n.value<s.year.end&&(p.year.getValue()!==n.value&&(p.year.setTop(n.top),p.year.setActive(n.index)),p.month.getValue()!==r.value&&(p.month.setTop(r.top),p.month.setActive(r.index)),p.day.getValue()!==a.value&&(p.day.setTop(a.top),p.day.setActive(a.index)))}function c(t){var e=p.year.getValue(),n=p.month.getValue(),r=p.day.getValue();return t.replace(/y+/,e).replace(/M+/,h(n,0,2)).replace(/d+/,h(r,0,2))}function h(t,e,n){for(var r=n-t.toString().length,a=0;r>a;a++)t=e.toString()+t.toString();return t}var m=r(),g=v?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"],y=!1;return n(document).on(g.join(" "),function(t){var e=n(t.target);e.closest("#datepicker").length>0&&s.opened&&(t.type===g[0]?e.closest("ul").parent().trigger("datepicker.scroll.touchstart",[t]):t.type===g[1]&&y?e.closest("ul").parent().trigger("datepicker.scroll.touchmove",[t]):t.type===g[2]&&e.closest("ul").parent().trigger("datepicker.scroll.touchend",[t]),t.preventDefault())}),{year:new t(l),month:new t(f),day:new t(d),setDate:o,getDateString:c}}function n(t){if("string"==typeof t&&m[t])return m[t];if(t instanceof HTMLElement||t instanceof HTMLDocument){for(var e=0;e<m.length;e++)if(m[e].elements[0]===t)return m[e]}else if(t instanceof Array)for(var n=0;n<m.length;n++)for(var a=m[n],i=0;i<a.elements.length&&(a.elements.length===t.length&&a.elements[i]==t[i]);i++)if(i===t.length-1)return m[n];var o=new r(t);return m.push(o),o}function r(t){function e(t,e,n){s.elements.forEach(function(a){n&&r(a,t,e),a.style[t]=e})}function r(t,e,n){s.prefix.forEach(function(r){t.style[r+e]=n})}function i(){return s.elements[0]?s.elements[0].getBoundingClientRect():{}}function o(){var t=[];return t.find=function(t,e){for(var n=0;n<this.length;n++){var r=u[n];if(r.target===t&&r.event===e)return r}},t}function c(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}if(t){var s=this,u=o();this.prefix=["-webkit-","-moz-","-ms-","-o-"],this.elements=[],this.typeName=this.constructor.name,t instanceof Array?s.elements=t:t instanceof NodeList?s.elements=a(t):t instanceof HTMLElement||t instanceof HTMLDocument?s.elements=[t]:"iQuery"===t.typeName?s.elements=t.elements:"string"==typeof t?(s.selector=t,s.elements=a(document.querySelectorAll(t))):(console.log("iQuery Notice: selector invalid.\n"),console.log("selector: "+t)),Object.defineProperty(s,"length",{get:function(){return s.elements.length}}),s.elements.forEach(function(t,e){s[e]=t}),["top","left","right","bottom","width","height"].forEach(function(t){s[t]=function(e){return"undefined"==typeof e?i()[t]:(s.css(t,/\d+[^\d]/.test(e)?e:e+"px"),s)}}),this.val=function(t){return"undefined"==typeof t?s[0].value:(s[0].value=t,s)},this.attr=function(t,e){if("string"==typeof t)return"undefined"==typeof e?s.length>0&&s.elements[0].getAttribute?s.elements[0].getAttribute(t):"":(s.elements.forEach(function(n){n.setAttribute(t,e)}),s);if("object"==typeof t){for(var n in t)!function(t){s.elements.forEach(function(n){n.setAttribute(t,e)})}(n);return s}},this.css=function(t,n,r){if("string"==typeof t)return"undefined"==typeof n?s.elements[0].style[t]:(e(t,n,r),s);if("object"==typeof t){for(var a in t)e(a,t[a],r);return s}},this.addClass=function(t){return s.elements.forEach(function(e){e.classList.add(t)}),s},this.removeClass=function(t){return s.elements.forEach(function(e){e.classList.remove(t)}),s},this.hasClass=function(t){return s.elements[0].classList.contains(t)},this.toggleClass=function(t){return s.hasClass(t)?s.removeClass(t):s.addClass(t),this},this.html=function(t){return"undefined"==typeof t?s.elements[0].innerHTML:(s.elements.forEach(function(e){e.innerHTML=t}),s)},this.append=function(t){return s.elements.forEach(function(e){t instanceof HTMLElement?e.appendChild(t):"iQuery"===t.typeName?t.elements.forEach(function(t){e.appendChild(t)}):"string"==typeof t&&e.appendChild(c(t))}),s},this.find=function(t){var e=[];return s.elements.forEach(function(r){n(r.querySelectorAll(t)).each(function(t){e.push(t)})}),n(e)},this.parent=function(){var t=[];return s.elements.forEach(function(e){e.parentElement&&t.push(e.parentElement)}),n(t)},this.parents=function(){var t=[];return s.elements.forEach(function(e){for(;e.parentElement;)t.push(e.parentElement),e=e.parentElement}),t},this.closest=function(t){var e=[],r=!1;return s.elements.forEach(function(a){for(var i=n(document).find(t);a.parentElement;){for(var o=0;o<i.length;o++)if(i[o]===a.parentElement){e.push(i[o]),r=!0;break}if(r)break;a=a.parentElement}}),n(e)},this.each=function(t){s.elements.forEach(t)},this.reverse=function(){return s.elements.reverse(),s},this.indexOf=function(t){for(var e=0;e<s.length;e++)if(s[e]===t)return e;return-1},this.on=function(t,e,n,r){var a=!0;return"function"==typeof e&&(a=!1,n=e),s.elements.forEach(function(i){var o=a===!1?n:function(t){for(var r=i.querySelectorAll(e),a=0;a<r.length;a++){var o=r[a];if(o===t.target){n.call(o,t);break}}};u.push({target:i,event:t,selector:e,handle:o}),t.split(" ").forEach(function(t){i.addEventListener(t,o,r)})}),this},this.off=function(t,e,n){return s.elements.forEach(function(r){if(!e){var a=u.find(r,t);a&&(e=a.handle)}t.split(" ").forEach(function(t){r.removeEventListener(t,e,n)})}),this},this.one=function(t,e,n){return s.on(t,function(n){s.off(t),e.call(this,n)},n),this},this.once=function(t,e,n,r){var a=0,i=new Date;s.on(t,function(t){var n=new Date;if(0===a&&n-i>r){a++,i=n;try{e.call(this,t)}finally{a=0}}},n)},this.trigger=function(t,e){return s.elements.forEach(function(n){var r=u.find(n,t);r&&r.handle.apply(n,e)}),s}}}function a(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)"undefined"!=typeof n[r]&&(t[r]=n[r])}return t}function o(t){return t%4==0&&(t%100!=0||t%400==0)}function c(){function t(){n("body").addClass("datepicker-open"),s.opened=!0}function e(){n("body").removeClass("datepicker-open"),s.opened=!1}function r(){var t=h.attr("data-format")||"yyyy-MM-dd";h.val(p.getDateString(t))}function a(){function t(t){p.day.setCurrent(t,.3,!1)}var e=p.year.getValue(),n=p.month.getValue(),r=p.day.getValue();2===n?o(e)?r>29&&t(29):t(28):-1===[1,3,5,7,8,10,12].indexOf(n)&&r>30&&t(30)}var i=n("[role='datepicker']"),c=v?"touchstart":"click";u.on("datepicker.value.changed",function(){a(),r()}),n(document).on(c,function(e){var a=n(e.target);if(i.indexOf(e.target)>-1){h=a;var o=h.val().replace(/-/g,"/"),c=new Date(o);h.attr("data-default-value",h.val()),isNaN(c.getDate())&&(c=new Date),p.setDate(c),r()}"datepicker"===a.attr("role")&&t()}),u.find("[data-dismiss='datepicker']").on(c,function(){e()}),u.find(".btn-cancel").on(c,function(){h.val(h.attr("data-default-value")),e()})}var s,u,l,f,d,h,m=[],p={},v=/Android|iOS|W(eb)?OS|iPhone|iPad|iPod|BlackBerry|Windows\s?Phone/i.test(window.navigator.userAgent),g={year:{start:1700,end:3e3},month:{start:1,end:12},day:{start:1,end:31},time:{start:0,end:0},touch:{start:0,end:0},opened:!1,smoothScroll:!0};!function(){n.extend=i,s=n.extend({},g),t(),p=e(),p.setDate(new Date),c()}(),window.DatePicker={setOptions:function(t){n.extend(s,t)}}}t()}();
//# sourceMappingURL=datepicker.org.js
//# sourceMappingURL=datepicker.map