"use strict";!function(){function t(){function t(){r.extend=o}function e(){function t(t,e,n){for(var r="",i=t;e>=i;i++)r+='<li data-value="'+i+'">'+i+n+"</li>";return r}var e='<div id="datepicker" class="datepicker-container">\n                                <div class="datepicker-wrapper">\n                                    <div class="datepicker-head">\n                                        <a href="javascript:;" class="btn-cancel">取消</a>\n                                        <a href="javascript:;" class="btn-confirm" data-dismiss="datepicker">确定</a>\n                                    </div>\n                                    <div class="datepicker-body">\n                                        <div class="datepicker-year">\n                                            <ul></ul>\n                                        </div>\n                                        <div class="datepicker-month">\n                                            <ul></ul>\n                                        </div>\n                                        <div class="datepicker-day">\n                                            <ul></ul>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>';r("body").append(e),d=r("#datepicker"),h=d.find(".datepicker-year"),p=d.find(".datepicker-month"),m=d.find(".datepicker-day"),h.find("ul").html(t(l.year.start,l.year.end,"年")),p.find("ul").html(t(l.month.start,l.month.end,"月")),m.find("ul").html(t(l.day.start,l.day.end,"日"))}function n(){function t(t){function n(t){g.css("transition","",!0),l.time.start=(new Date).getTime(),l.touch.start=t.touches[0].clientY,k.start=k.current}function o(t){k.current=k.start+t.touches[0].clientY-l.touch.start,h(k.current)}function c(t){l.time.end=(new Date).getTime(),l.touch.end=t.changedTouches[0].clientY,k.direction=k.end>k.start?"down":"up",l.smoothScroll?s():u(),d()}function s(){var t=l.time.end-l.time.start,n=l.touch.end-l.touch.start,r=e(n,t),i=k.current+n*r*1.5,a=r;p(i,a,"cubic-bezier(.14,.41,.39,.69)")}function u(){var t=parseFloat((k.current/f).toFixed(1));k.current=Math.round(t)*f,p(k.current)}function d(){k.current>b.top?(k.current=b.top,p(k.current)):k.current<b.bottom&&(k.current=b.bottom,p(k.current))}function h(t){k.current=t,g.css("transform","translate3d(0, "+t+"px, 0)",!0)}function p(t){var e=arguments.length<=1||void 0===arguments[1]?.3:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"ease":arguments[2];k.current=t,g.css("transition","transform "+e+"s "+n,!0).css("transform","translate3d(0, "+t+"px, 0)",!0)}function m(t){var e=arguments.length<=1||void 0===arguments[1]?"active":arguments[1];g.find("li.active").removeClass(e),g.find("li:nth-child("+t+")").addClass(e)}var v=this,g=t.find("ul"),y=t.height(),E=g.height(),k={start:0,end:0,current:0,direction:"up"},b={top:2*f,bottom:y-E-2*f},D=0;t.on("datepicker.scroll.touchstart",n),t.on("datepicker.scroll.touchmove",o),t.on("datepicker.scroll.touchend",c),g.once("webkitTransitionEnd transitionend",function(){g.trigger("datepicker.scroll.stop")},!1,500),g.on("datepicker.scroll.stop",function(){u(),v.setActive(a(k.current,f))}),this.setTop=function(t){h(t)},this.setActive=function(t){m(t),D=t,r(document).trigger("datepicker.input.change")},this.setCurrent=function(t){h(i(t)),v.setActive(t)},this.getActiveIndex=function(){return D},this.getValue=function(){return parseInt(g.find("li.active").attr("data-value"))}}function e(t,e){return parseFloat(Math.abs(t/e).toFixed(2))}function n(){return h.find("ul > li:first-child").height()}function i(t){return(3-t)*f}function a(t,e){return parseInt(3-t/e)}function o(t){var e=u(l.year.start,t.getFullYear()),n=u(l.month.start,t.getMonth()+1),r=u(l.day.start,t.getDate());e.value>l.year.start&&e.value<l.year.end&&(y.year.setTop(e.top),y.year.setActive(e.index),y.month.setTop(n.top),y.month.setActive(n.index),y.day.setTop(r.top),y.day.setActive(r.index))}function c(t){var e=y.year.getValue(),n=y.month.getValue(),r=y.day.getValue();return t.replace(/y+/,e).replace(/M+/,s(n,0,2)).replace(/d+/,s(r,0,2))}function s(t,e,n){for(var r=0;n>r;r++)t=e+t;return t}function u(t,e){var n={};return n.value=e,n.top=(t-e+2)*f,n.index=a(n.top,f),n}var f=n();return r(document).on("touchstart touchmove touchend",function(t){var e=r(t.target);e.closest("#datepicker").length>0&&l.opened&&("touchstart"===t.type?e.closest("ul").parent().trigger("datepicker.scroll.touchstart",[t]):"touchmove"===t.type?e.closest("ul").parent().trigger("datepicker.scroll.touchmove",[t]):"touchend"===t.type&&e.closest("ul").parent().trigger("datepicker.scroll.touchend",[t]),t.preventDefault())}),{year:new t(h),month:new t(p),day:new t(m),setDate:o,getDateString:c}}function r(t){if("string"==typeof t&&g[t])return g[t];if(t instanceof HTMLElement||t instanceof HTMLDocument){for(var e=0;e<g.length;e++)if(g[e].elements[0]===t)return g[e]}else if(t instanceof Array)for(var n=0;n<g.length;n++)for(var r=g[n],a=0;a<r.elements.length&&(r.elements.length===t.length&&r.elements[a]==t[a]);a++)if(a===t.length-1)return g[n];var o=new i(t);return g.push(o),o}function i(t){function e(t,e,r){s.elements.forEach(function(i){r&&n(i,t,e),i.style[t]=e})}function n(t,e,n){s.prefix.forEach(function(r){t.style[r+e]=n})}function i(){return s.elements[0]?s.elements[0].getBoundingClientRect():{}}function o(){var t=[];return t.find=function(t,e){for(var n=0;n<this.length;n++){var r=u[n];if(r.target===t&&r.event===e)return r}},t}function c(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}if(t){var s=this,u=o();this.prefix=["-webkit-","-moz-","-ms-","-o-"],this.elements=[],this.typeName=this.constructor.name,t instanceof Array?s.elements=t:t instanceof NodeList?s.elements=a(t):t instanceof HTMLElement||t instanceof HTMLDocument?s.elements=[t]:"iQuery"===t.typeName?s.elements=t.elements:"string"==typeof t?(s.selector=t,s.elements=a(document.querySelectorAll(t))):(console.log("iQuery Notice: selector invalid.\n"),console.log("selector: "+t)),Object.defineProperty(s,"length",{get:function(){return s.elements.length}}),s.elements.forEach(function(t,e){s[e]=t}),["top","left","right","bottom","width","height"].forEach(function(t){s[t]=function(e){return"undefined"==typeof e?i()[t]:(s.css(t,/\d+[^\d]/.test(e)?e:e+"px"),s)}}),this.val=function(t){return"undefined"==typeof t?s[0].value:(s[0].value=t,s)},this.attr=function(t,e){if("string"==typeof t){if("undefined"!=typeof e)return s.elements.forEach(function(n){n.setAttribute(t,e)}),s;if(s.elements[0].getAttribute)return s.elements[0].getAttribute(t)}else if("object"==typeof t){for(var n in t)!function(t){s.elements.forEach(function(n){n.setAttribute(t,e)})}(n);return s}},this.css=function(t,n,r){if("string"==typeof t)return"undefined"==typeof n?s.elements[0].style[t]:(e(t,n,r),s);if("object"==typeof t){for(var i in t)e(i,t[i],r);return s}},this.addClass=function(t){return s.elements.forEach(function(e){e.classList.add(t)}),s},this.removeClass=function(t){return s.elements.forEach(function(e){e.classList.remove(t)}),s},this.hasClass=function(t){return s.elements[0].classList.contains(t)},this.toggleClass=function(t){return s.hasClass(t)?s.removeClass(t):s.addClass(t),this},this.html=function(t){return"undefined"==typeof t?s.elements[0].innerHTML:(s.elements.forEach(function(e){e.innerHTML=t}),s)},this.append=function(t){return s.elements.forEach(function(e){t instanceof HTMLElement?e.appendChild(t):"iQuery"===t.typeName?t.elements.forEach(function(t){e.appendChild(t)}):"string"==typeof t&&e.appendChild(c(t))}),s},this.find=function(t){var e=[];return s.elements.forEach(function(n){r(n.querySelectorAll(t)).each(function(t){e.push(t)})}),r(e)},this.parent=function(){var t=[];return s.elements.forEach(function(e){e.parentElement&&t.push(e.parentElement)}),r(t)},this.parents=function(){var t=[];return s.elements.forEach(function(e){for(;e.parentElement;)t.push(e.parentElement),e=e.parentElement}),t},this.closest=function(t){var e=[],n=!1;return s.elements.forEach(function(i){for(var a=r(document).find(t);i.parentElement;){for(var o=0;o<a.length;o++)if(a[o]===i.parentElement){e.push(a[o]),n=!0;break}if(n)break;i=i.parentElement}}),r(e)},this.each=function(t){s.elements.forEach(t)},this.reverse=function(){return s.elements.reverse(),s},this.indexOf=function(t){for(var e=0;e<s.length;e++)if(s[e]===t)return e;return-1},this.on=function(t,e,n,r){var i=!0;return"function"==typeof e&&(i=!1,n=e),s.elements.forEach(function(a){var o=i===!1?n:function(t){for(var r=a.querySelectorAll(e),i=0;i<r.length;i++){var o=r[i];if(o===t.target){n.call(o,t);break}}};u.push({target:a,event:t,selector:e,handle:o}),t.split(" ").forEach(function(t){a.addEventListener(t,o,r)})}),this},this.off=function(t,e,n){return s.elements.forEach(function(r){if(!e){var i=u.find(r,t);i&&(e=i.handle)}t.split(" ").forEach(function(t){r.removeEventListener(t,e,n)})}),this},this.one=function(t,e,n){return s.on(t,function(n){s.off(t),e.call(this,n)},n),this},this.once=function(t,e,n,r){var i=0,a=new Date;s.on(t,function(t){var n=new Date;if(0===i&&n-a>r){i++,a=n;try{e.call(this,t)}finally{i=0}}},n)},this.trigger=function(t,e){return s.elements.forEach(function(n){var r=u.find(n,t);r&&r.handle.apply(n,e)}),s}}}function a(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)"undefined"!=typeof n[r]&&(t[r]=n[r])}return t}function c(){r("body").addClass("datepicker-open"),l.opened=!0}function s(){r("body").removeClass("datepicker-open"),l.opened=!1}function u(){var t=v.attr("data-format")||"yyyy-MM-dd";v.val(y.getDateString(t))}function f(){var t=r("[role='datepicker']");r(document).on("datepicker.input.change",function(){u()}),r(document).on("touchstart",function(e){var n=r(e.target);if(t.indexOf(e.target)>-1){v=n;var i=v.val().replace(/-/g,"/"),a=new Date(i);v.attr("data-default-value",i),isNaN(a.getDate())&&(a=new Date),y.setDate(a),u()}"datepicker"===n.attr("role")&&c()}),d.find("[data-dismiss='datepicker']").on("touchstart",function(){s()}),d.find(".btn-cancel").on("touchstart",function(){v.val(v.attr("data-default-value")),s()})}t();var l,d,h,p,m,v,g=[],y={},E={year:{start:1700,end:3e3},month:{start:1,end:12},day:{start:1,end:31},time:{start:0,end:0},touch:{start:0,end:0},opened:!1,smoothScroll:!0};l=r.extend({},E),function(){e(),y=n(),y.setDate(new Date),f()}(),window.DatePicker={setOptions:function(t){r.extend(l,t)}}}try{t()}catch(e){console.log("DatePicker Error: "+e)}}();
//# sourceMappingURL=datepicker.org.js
//# sourceMappingURL=/Content/LMS/plugins/datepicker/datepicker.map