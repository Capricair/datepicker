"use strict";!function(){function e(){function e(){function e(e,t,n){for(var r="",i=e;t>=i;i++)r+='<li data-value="'+i+'">'+i+n+"</li>";return r}var n='<div id="datepicker" class="datepicker-container">\n                                <div class="datepicker-wrapper">\n                                    <div class="datepicker-head">\n                                        <a href="javascript:;" class="btn-cancel">取消</a>\n                                        <a href="javascript:;" class="btn-confirm" data-dismiss="datepicker">确定</a>\n                                    </div>\n                                    <div class="datepicker-body">\n                                        <div class="datepicker-year">\n                                            <ul></ul>\n                                        </div>\n                                        <div class="datepicker-month">\n                                            <ul></ul>\n                                        </div>\n                                        <div class="datepicker-day">\n                                            <ul></ul>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>';0===t("#datepicker").length?t("body").append(n):t("#datepicker").html(t(n).children()[0].outerHTML),s=t("#datepicker"),u=s.find(".datepicker-year"),l=s.find(".datepicker-month"),f=s.find(".datepicker-day"),u.find("ul").html(e(c.year.start,c.year.end,"年")),l.find("ul").html(e(c.month.start,c.month.end,"月")),f.find("ul").html(e(c.day.start,c.day.end,"日"))}function n(){function e(e){function t(e){k=!0;var t=u(e);w.css("transition","none",!0),p.time.start=(new Date).getTime(),p.touch.start=t,T.start=T.current}function r(e){var t=u(e);T.current=T.start+t-p.touch.start,m(T.current)}function o(e){k=!1;var t=u(e);p.time.end=(new Date).getTime(),p.touch.end=t,T.direction=T.end>T.start?"down":"up",c.smoothScroll?l():f(),d()}function u(e){return h?(e.touch?e.touches[0]:e.changedTouches[0]).clientY:e.clientY}function l(){var e=p.time.end-p.time.start,t=p.touch.end-p.touch.start,r=n(t,e),i=T.current+t*r*1.5,a=r;v(i,a,"cubic-bezier(.14,.41,.39,.69)")}function f(){var e=parseFloat((T.current/g).toFixed(1));T.current=Math.round(e)*g,v(T.current)}function d(){T.current>D.top?(T.current=D.top,v(T.current)):T.current<D.bottom&&(T.current=D.bottom,v(T.current))}function m(e){T.current=e,w.css("transform","translate3d(0, "+e+"px, 0)",!0)}function v(e){var t=arguments.length<=1||void 0===arguments[1]?.3:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"ease":arguments[2];T.current=e,w.css("transition","transform "+t+"s "+n,!0).css("transform","translate3d(0, "+e+"px, 0)",!0)}function y(e){var t=arguments.length<=1||void 0===arguments[1]?"active":arguments[1];w.find("li.active").removeClass(t),w.find("li:nth-child("+e+")").addClass(t)}var E=this,w=e.find("ul"),b=e.height(),x=w.height(),T={start:0,end:0,current:0,direction:"up"},D={top:2*g,bottom:b-x-2*g},A=0;e.on("datepicker.scroll.touchstart",t),e.on("datepicker.scroll.touchmove",r),e.on("datepicker.scroll.touchend",o),w.once("webkitTransitionEnd transitionend",function(){w.trigger("datepicker.scroll.stop")},!1,500),w.on("datepicker.scroll.stop",function(){f(),E.setActive(a(T.current,g))}),this.setTop=function(e){m(e)},this.setActive=function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];y(e),A=e,t&&s.trigger("datepicker.value.changed")},this.setCurrent=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];v(i(e),t),E.setActive(e,n)},this.getActiveIndex=function(){return A},this.getValue=function(){return parseInt(w.find("li.active").attr("data-value"))}}function n(e,t){return parseFloat(Math.abs(e/t).toFixed(2))}function r(){return u.find("ul > li:first-child").height()}function i(e){return(3-e)*g}function a(e,t){return parseInt(3-e/t)}function o(e){function t(e,t){var n={};return n.value=t,n.top=(e-t+2)*g,n.index=a(n.top,g),n}var n=t(c.year.start,e.getFullYear()),r=t(c.month.start,e.getMonth()+1),i=t(c.day.start,e.getDate()),o=0;n.value>c.year.start&&n.value<c.year.end&&(d.year.getValue()!==n.value&&(o++,d.year.setTop(n.top),d.year.setActive(n.index,!1)),d.month.getValue()!==r.value&&(o++,d.month.setTop(r.top),d.month.setActive(r.index,!1)),d.day.getValue()!==i.value&&(o++,d.day.setTop(i.top),d.day.setActive(i.index,!1)),o>0&&s.trigger("datepicker.value.changed"))}function m(e){var t=d.year.getValue(),n=d.month.getValue(),r=d.day.getValue();return e.replace(/y+/,t).replace(/M+/,v(n,0,2)).replace(/d+/,v(r,0,2))}function v(e,t,n){for(var r=n-e.toString().length,i=0;r>i;i++)e=t.toString()+e.toString();return e}var g=r(),y=h?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"],k=!1;return t(document).on(y.join(" "),function(e){var n=t(e.target);n.closest("#datepicker").length>0&&c.opened&&(e.type===y[0]?n.closest("ul").parent().trigger("datepicker.scroll.touchstart",[e]):e.type===y[1]&&k?n.closest("ul").parent().trigger("datepicker.scroll.touchmove",[e]):e.type===y[2]&&n.closest("ul").parent().trigger("datepicker.scroll.touchend",[e]),e.preventDefault())}),{year:new e(u),month:new e(l),day:new e(f),setDate:o,getDateString:m}}function r(e){return e%4==0&&(e%100!=0||e%400==0)}function i(){function e(){return c.attr("data-format")||"yyyy-MM-dd"}function n(){var t=e();c.val(d.getDateString(t))}function i(){function e(e){d.day.setCurrent(e,.3,!1)}var t=d.year.getValue(),n=d.month.getValue(),i=d.day.getValue();2===n?r(t)?i>29&&e(29):e(28):-1===[1,3,5,7,8,10,12].indexOf(n)&&i>30&&e(30)}var c=null,m=t("[role='datepicker']"),p=h?"touchend":"click",v={x:0,y:0,timestamp:0};s.on("datepicker.value.changed",function(){i(),n()}),t(document).on("touchstart",function(e){v.x=e.touches[0].clientX,v.y=e.touches[0].clientY,v.timestamp=(new Date).getTime()}),t(document).on(p,function(r){var i=t(r.target);if(!(v.x!==r.changedTouches[0].clientX||v.y!==r.changedTouches[0].clientY||(new Date).getTime()-v.timestamp>100)){if(m.indexOf(r.target)>-1){c=i;var o=c.val().replace(/-/g,"/"),s=new Date(o),h=e();u.show(),l.show(),f.show(),/d+/.test(h)||f.hide(),/M+/.test(h)||l.hide(),c.attr("data-default-value",c.val()),isNaN(s.getDate())&&(s=new Date),d.setDate(s,!1),n()}"datepicker"===i.attr("role")&&a()}}),s.find("[data-dismiss='datepicker']").on(p,function(){o()}),s.find(".btn-cancel").on(p,function(){c.val(c.attr("data-default-value")),o()})}function a(){t("body").addClass("datepicker-open"),c.opened=!0}function o(){t("body").removeClass("datepicker-open"),c.opened=!1}var c,s,u,l,f,d={},h=/Android|iOS|W(eb)?OS|iPhone|iPad|iPod|BlackBerry|Windows\s?Phone/i.test(window.navigator.userAgent),m={year:{start:1700,end:3e3},month:{start:1,end:12},day:{start:1,end:31},opened:!1,smoothScroll:!0},p={time:{start:0,end:0},touch:{start:0,end:0}};!function(){c=t.extend({},m),e(),d=n(),d.setDate(new Date),i()}(),window.datepicker={init:function(n){t.extend(c,n),e()},open:a,close:o}}function t(e){if("string"==typeof e&&i[e])return i[e];if(e instanceof HTMLElement||e instanceof HTMLDocument){for(var t=0;t<i.length;t++)if(i[t].elements[0]===e&&1===i[t].length)return i[t]}else if(e instanceof Array)for(var r=0;r<i.length;r++)for(var a=i[r],o=0;o<a.elements.length&&(a.elements.length===e.length&&a.elements[o]==e[o]);o++)if(o===e.length-1)return i[r];var c=new n(e);return i.push(c),c}function n(e){function n(e,t,n){s.elements.forEach(function(i){n&&r(i,e,t),i.style[e]=t})}function r(e,t,n){s.prefix.forEach(function(r){e.style[r+t]=n})}function i(){return s.elements[0]?s.elements[0].getBoundingClientRect():{}}function a(){var e=[];return e.find=function(e,t){for(var n=0;n<this.length;n++){var r=u[n];if(r.target===e&&r.event===t)return r}},e}function o(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function c(e){var t=document.createElement("div");return t.innerHTML=e,t.children}if(e){var s=this,u=a();s.prefix=["-webkit-","-moz-","-ms-","-o-"],s.selector=null,s.elements=[],s.typeName="iQuery",e instanceof Array?s.elements=e:e instanceof NodeList?s.elements=o(e):e instanceof HTMLElement||e instanceof HTMLDocument?s.elements=[e]:"iQuery"===e.typeName?s.elements=e.elements:"string"==typeof e?/<.*?>/i.test(e)?s.elements=o(c(e)):(s.selector=e,s.elements=o(document.querySelectorAll(e))):console.log("iQuery Notice: selector invalid."),Object.defineProperty(s,"length",{get:function(){return s.elements.length}}),s.elements.forEach(function(e,t){s[t]=e}),["top","left","right","bottom","width","height"].forEach(function(e){s[e]=function(t){return"undefined"==typeof t?i()[e]:(s.css(e,/\d+[^\d]/.test(t)?t:t+"px"),s)}}),this.val=function(e){return"undefined"==typeof e?s[0].value:(s[0].value=e,s)},this.attr=function(e,t){if("string"==typeof e)return"undefined"==typeof t?s.length>0&&s.elements[0].getAttribute?s.elements[0].getAttribute(e):"":(s.elements.forEach(function(n){n.setAttribute(e,t)}),s);if("object"==typeof e){for(var n in e)!function(e){s.elements.forEach(function(n){n.setAttribute(e,t)})}(n);return s}},this.css=function(e,t,r){if("string"==typeof e)return"undefined"==typeof t?s.elements[0].style[e]:(n(e,t,r),s);if("object"==typeof e){for(var i in e)n(i,e[i],r);return s}},this.show=function(){n("display","")},this.hide=function(){n("display","none")},this.addClass=function(e){return s.elements.forEach(function(t){t.classList.add(e)}),s},this.removeClass=function(e){return s.elements.forEach(function(t){t.classList.remove(e)}),s},this.hasClass=function(e){return s.elements[0].classList.contains(e)},this.toggleClass=function(e){return s.hasClass(e)?s.removeClass(e):s.addClass(e),this},this.html=function(e){return"undefined"==typeof e?s.elements[0].innerHTML:(s.elements.forEach(function(t){t.innerHTML=e}),s)},this.append=function(e){return s.elements.forEach(function(t){if(e instanceof HTMLElement)t.appendChild(e);else if("iQuery"===e.typeName)e.elements.forEach(function(e){t.appendChild(e)});else if("string"==typeof e)for(var n=c(e),r=0;r<n.length;r++)t.appendChild(n[r])}),s},this.find=function(e){var n=[];return s.elements.forEach(function(r){t(r.querySelectorAll(e)).each(function(e){n.push(e)})}),t(n)},this.parent=function(){var e=[];return s.elements.forEach(function(t){t.parentElement&&e.push(t.parentElement)}),t(e)},this.parents=function(){var e=[];return s.elements.forEach(function(t){for(;t.parentElement;)e.push(t.parentElement),t=t.parentElement}),e},this.closest=function(e){var n=[],r=!1;return s.elements.forEach(function(i){for(var a=t(document).find(e);i.parentElement;){for(var o=0;o<a.length;o++)if(a[o]===i.parentElement){n.push(a[o]),r=!0;break}if(r)break;i=i.parentElement}}),t(n)},this.children=function(){var e=[];return s.elements.forEach(function(t){e.push(t.children)}),t(e)},this.each=function(e){s.elements.forEach(e)},this.reverse=function(){return s.elements.reverse(),s},this.indexOf=function(e){for(var t=0;t<s.length;t++)if(s[t]===e)return t;return-1},this.on=function(e,t,n,r){var i=!0;return"function"==typeof t&&(i=!1,n=t),s.elements.forEach(function(a){var o=i===!1?n:function(e){for(var r=a.querySelectorAll(t),i=0;i<r.length;i++){var o=r[i];if(o===e.target){n.call(o,e);break}}};u.push({target:a,event:e,selector:t,handle:o}),e.split(" ").forEach(function(e){a.addEventListener(e,o,r)})}),this},this.off=function(e,t,n){return s.elements.forEach(function(r){if(!t){var i=u.find(r,e);i&&(t=i.handle)}e.split(" ").forEach(function(e){r.removeEventListener(e,t,n)})}),this},this.one=function(e,t,n){return s.on(e,function(n){s.off(e),t.call(this,n)},n),this},this.once=function(e,t,n,r){var i=0,a=new Date;s.on(e,function(e){var n=new Date;if(0===i&&n-a>r){i++,a=n;try{t.call(this,e)}finally{i=0}}},n)},this.trigger=function(e,t){return s.elements.forEach(function(n){var r=u.find(n,e);r?r.handle.apply(n,t):(u[e]||(u[e]=new Event(e)),n.dispatchEvent(u[e]))}),s}}}function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]&&"object"==typeof n[i]?r(e[i],n[i]):"undefined"!=typeof n[i]&&(e[i]=n[i])}return e}var i=[];t.extend=r,e()}();
//# sourceMappingURL=datepicker.org.js
//# sourceMappingURL=datepicker.map